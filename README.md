# sql_bootcamp

## Описание
Курс по изучению языка SQL и работе с реляционными базами данных. В рамках обучения ежедневно выполнялись практические упражнения, охватывающие все ключевые аспекты работы с данными: от базовой выборки и операций над множествами до сложных транзакций, представлений, индексов, триггеров, хранимых функций и проектирования хранилищ данных. Все задания реализованы на СУБД **PostgreSQL** с использованием инструмента **pgAdmin**.

---

## Схемы баз данных

### Основная схема базы данных

!

### Схема базы данных для проекта Team01

!

---

## Упражнения
### Day 00 — Основы реляционной модели и базовый SQL
Работа с простыми `SELECT`-запросами: фильтрация, сортировка, вычисляемые поля, вложенные подзапросы в `SELECT`, условные конструкции (`CASE`), форматирование текста.

### Day 01 — Операции над множествами и простые соединения
Изучение `UNION`, `INTERSECT`, `EXCEPT` (с и без дубликатов), декартового произведения (`CROSS JOIN`), базовых `JOIN`, сравнение `IN` и `EXISTS`, `NATURAL JOIN`.

### Day 02 — Продвинутые `JOIN` и анализ данных
Использование всех типов `JOIN` (`LEFT`, `RIGHT`, `FULL`), CTE, сравнение поведения пользователей, поиск общих и уникальных записей, работа с условиями «только для мужчин/женщин».

### Day 03 — Модификация данных (DML)
Вставка, обновление и удаление записей (`INSERT`, `UPDATE`, `DELETE`), динамическое определение ID через подзапросы, массовые вставки (`INSERT` ... `SELECT`), откат изменений.

### Day 04 — Представления (VIEW и MATERIALIZED VIEW)
Создание виртуальных и материализованных представлений, генерация дат (generate_series), симметрическая разность множеств, обновление материализованных данных.

### Day 05 — Индексация и оптимизация запросов
Создание B-tree, функциональных, составных и частичных индексов, проверка их использования через `EXPLAIN ANALYZE`, обеспечение уникальности и производительности.

### Day 06 — Реализация бизнес-логики и целостность данных
Создание таблицы персональных скидок, расчёт значений по истории заказов, наложение ограничений (`NOT NULL`, `CHECK`), автоматизация PK через `SEQUENCE`.

### Day 07 — Агрегация и OLAP-анализ
Группировка данных (`GROUP BY`), агрегатные функции (`COUNT`, `SUM`, `AVG`, `MIN`, `MAX`), фильтрация групп (`HAVING`), оконные функции, сравнение метрик по пользователям и пиццериям.

### Day 08 — Транзакции и уровни изоляции
Изучение поведения **PostgreSQL** под уровнями изоляции (`READ COMMITTED`, `REPEATABLE READ`, `SERIALIZABLE`), воспроизведение аномалий: Lost Update, Non-Repeatable Read, Phantom Read, Deadlock.

### Day 09 — Хранимые функции и триггеры
Создание аудит-лога через триггеры (`INSERT`/`UPDATE`/`DELETE`), написание SQL- и PL/pgSQL-функций: параметризованных, рекурсивных, возвращающих таблицы.

### Проект Team 00 — Задача коммивояжёра (TSP)
Решение NP-полной задачи поиска кратчайшего гамильтонова цикла по 4 городам с использованием рекурсивных CTE.

### Проект Team 01 — Хранилище данных (Data Warehouse)
Построение ETL-процесса: объединение трёх независимых OLTP-источников (User, Balance, Currency), обработка NULL, расчёт баланса в USD с учётом ближайшего исторического курса валюты.

---

## Примеры задач

### ex01
**Задача**: Напишите SQL-запрос, который агрегирует балансы по пользователям и типам, суммирует все транзакции, обрабатывает NULL в имени/фамилии как 'not defined', подтягивает актуальный курс валюты (если есть) и рассчитывает итоговую сумму в USD.

### ex01
**Задача**: Напишите SQL-запрос, который возвращает всех пользователей и все их транзакции из таблицы Balance, игнорируя валюты, отсутствующие в таблице Currency. Для каждой транзакции укажите название валюты и её значение в USD, рассчитанное по ближайшему курсу — сначала ищем курс до даты операции, если нет — берём первый курс после неё.

---

## Итог
SQL Bootcamp стал для меня отличной возможностью глубоко погрузиться в работу с реляционными базами данных. Я научился писать сложные запросы, эффективно использовать JOIN и операции над множествами, работать с транзакциями и уровнями изоляции, создавать триггеры и хранимые функции. Отдельное внимание — проектированию бизнес-логики (например, система персональных скидок) и решению нетривиальных задач, таких как задача коммивояжёра.
